// Generated by CoffeeScript 1.10.0
(function() {
  angular.module('InterCityBus.controllers').controller('BuslineListCtrl', function($state, $scope, $http, $window, Busline) {
    $scope.buslines = Busline.query();
    return $scope.deleteBusline = function(busline) {
      return busline.$remove(function() {
        return $state.go($state.current, {}, {
          reload: true
        });
      });
    };
  }).controller('BuslineViewCtrl', function($scope, $stateParams, Busline) {
    return $scope.busline = Busline.get({
      id: $stateParams.id
    });
  }).controller('BuslineCreateCtrl', function($scope, $state, $stateParams, Busline, City, Company, Station, Starttime, Phone) {
    $scope.cities = City.query();
    $scope.companies = Company.query();
    $scope.stations = Station.query();
    $scope.busline = new Busline();
    $scope.starttimes = Starttime.query();
    $scope.phones = Phone.query();
    $scope.addBusline = function() {
      return $scope.busline.$save(function() {
        return $state.go("buslines");
      });
    };
    $scope.addPhone = function(index) {
      if (!$scope.busline.phones) {
        $scope.busline.phones = [];
      }
      if ($scope.busline.phones.indexOf(this.phoneToAdd[index]) === -1) {
        return $scope.busline.phones.splice(index, 0, this.phoneToAdd[index]);
      }
    };
    $scope.addStarttime = function(index) {
      if (!$scope.busline.StartTime) {
        $scope.busline.StartTime = [];
      }
      if ($scope.busline.StartTime.indexOf(this.starttimeToAdd[index]) === -1) {
        return $scope.busline.StartTime.splice(index, 0, this.starttimeToAdd[index]);
      }
    };
    $scope.addStation = function(index, isEndCity) {
      var startStations, toAddStation, toInsertPos;
      toInsertPos = index;
      if (isEndCity) {
        startStations = $scope.busline.stations.filter(function(item) {
          if (item.cityId === $scope.busline.startCityId) {
            return true;
          } else {
            return false;
          }
        });
        toInsertPos += startStations.length;
        toAddStation = this.stationToAdd2[index];
      } else {
        toAddStation = this.stationToAdd[index];
      }
      if (!$scope.busline.stations) {
        $scope.busline.stations = [];
      }
      if ($scope.busline.stations.indexOf(toAddStation) === -1) {
        return $scope.busline.stations.splice(toInsertPos, 0, toAddStation);
      }
    };
    $scope.delPhone = function(index) {
      return $scope.busline.phones.splice(index, 1);
    };
    $scope.delStarttime = function(index) {
      return $scope.busline.StartTime.splice(index, 1);
    };
    return $scope.delStation = function(index, isEndCity) {
      var startStations, toInsertPos;
      toInsertPos = index;
      if (isEndCity) {
        startStations = $scope.busline.stations.filter(function(item) {
          if (item.cityId === $scope.busline.startCityId) {
            return true;
          } else {
            return false;
          }
        });
        toInsertPos += startStations.length;
      }
      $scope.busline.stations.splice(toInsertPos, 1);
    };
  }).controller('BuslineEditCtrl', function($scope, $state, $stateParams, Busline, City, Company, Station, Starttime, Phone) {
    $scope.cities = City.query();
    $scope.companies = Company.query();
    $scope.stations = Station.query();
    $scope.starttimes = Starttime.query();
    $scope.phones = Phone.query();
    $scope.addPhone = function(index) {
      if (!$scope.busline.phones) {
        $scope.busline.phones = [];
      }
      if ($scope.busline.phones.indexOf(this.phoneToAdd[index]) === -1) {
        return $scope.busline.phones.splice(index, 0, this.phoneToAdd[index]);
      }
    };
    $scope.delPhone = function(index) {
      return $scope.busline.phones.splice(index, 1);
    };
    $scope.addStarttime = function(index) {
      if (!$scope.busline.StartTime) {
        $scope.busline.StartTime = [];
      }
      if ($scope.busline.StartTime.indexOf(this.starttimeToAdd[index]) === -1) {
        return $scope.busline.StartTime.splice(index, 0, this.starttimeToAdd[index]);
      }
    };
    $scope.delStarttime = function(index) {
      return $scope.busline.StartTime.splice(index, 1);
    };
    $scope.addStation = function(index, isEndCity) {
      var startStations, toAddStation, toInsertPos;
      toInsertPos = index;
      if (isEndCity) {
        startStations = $scope.busline.stations.filter(function(item) {
          if (item.cityId === $scope.busline.startCityId) {
            return true;
          } else {
            return false;
          }
        });
        toInsertPos += startStations.length;
        toAddStation = this.stationToAdd2[index];
      } else {
        toAddStation = this.stationToAdd[index];
      }
      if ($scope.busline.stations.indexOf(toAddStation) === -1) {
        return $scope.busline.stations.splice(toInsertPos, 0, toAddStation);
      }
    };
    $scope.delStation = function(index, isEndCity) {
      var startStations, toInsertPos;
      toInsertPos = index;
      if (isEndCity) {
        startStations = $scope.busline.stations.filter(function(item) {
          if (item.cityId === $scope.busline.startCityId) {
            return true;
          } else {
            return false;
          }
        });
        toInsertPos += startStations.length;
      }
      $scope.busline.stations.splice(toInsertPos, 1);
    };
    $scope.loadBusline = function() {
      $scope.updateBusline = function() {
        return $scope.busline.$update(function() {
          return $state.go("buslines");
        });
      };
      return $scope.busline = Busline.get({
        id: $stateParams.id
      });
    };
    return $scope.loadBusline();
  });

}).call(this);

//# sourceMappingURL=buslines.controller.js.map
