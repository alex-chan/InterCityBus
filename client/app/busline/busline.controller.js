// Generated by CoffeeScript 1.10.0
(function() {
  angular.module('InterCityBus').controller('BuslineController', function($scope, $window, $document, $stateParams, $http, $timeout, $interval, Busline, Utils) {
    $document[0].onoffline = function() {
      return alert('onoffline');
    };
    $scope.dial = function(phone) {
      var handler;
      console.log('phone:' + phone);
      handler = $window.open("tel:" + phone, "_blank");
      $scope.xx = handler;
      handler.onbeforeunload = function(event) {
        $scope.xx = 'sb';
        return alert("onbeforeunload");
      };
      handler.addEventListener("close", function(event) {
        $scope.xx = 'sb2';
        return alert("close");
      });
      handler.addEventListener('loadstart', function() {
        return alert('start: ');
      });
      handler.addEventListener('loadstop', function() {
        return alert('stop: ');
      });
      handler.addEventListener('exit', function() {
        return alert("sb5");
      });
      return false;
    };
    $scope.xx = 1;
    $document[0].addEventListener("visibilitychange", function() {
      console.log(this.xx);
      console.log($scope.xx);
      this.xx += 100;
      $scope.xx += 100;
      console.log(this.xx);
      console.log($scope.xx);
      return console.log($document[0].visibilityState);
    });
    $scope.purify = function(str) {
      return str.replace(/\s+/g, "") + " " + $scope.xx;
    };
    $scope.busline = Busline.get({
      id: $stateParams.id
    });
    return $scope.$on('$viewContentLoaded', function(event) {
      return $timeout(function() {
        return Utils.fixTooLongIssue();
      }, 100);
    });
  });

}).call(this);

//# sourceMappingURL=busline.controller.js.map
