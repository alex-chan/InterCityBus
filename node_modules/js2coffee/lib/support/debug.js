// Generated by CoffeeScript 1.10.0

/*
 * Debugging provisions. Run `before -> require('./lib/support/debug')` in tests
 * to print out some debug information.
 */

(function() {
  var TransformerBase, isBroken, print;

  TransformerBase = require('../transformer_base');

  TransformerBase.prototype.onBeforeEnter = function(node) {
    var broken, fn, msg;
    msg = "" + node.type;
    fn = this[msg] != null;
    broken = isBroken(this.ast) || "";
    return print(this.depth, (fn ? msg + " *" : "" + msg), broken);
  };

  TransformerBase.prototype.onBeforeExit = function(node) {
    var broken, fn, msg;
    msg = node.type + "Exit";
    fn = this[msg] != null;
    broken = isBroken(this.ast) || "";
    return print(this.depth + 1, (fn ? msg + " *" : "" + msg), broken);
  };

  print = function(depth, nodeType, message) {
    var color, indent, prefix;
    if (message == null) {
      message = "";
    }
    color = /\*$/.test(nodeType) ? 35 : 30;
    prefix = "\u001b[" + color + "m" + nodeType + "\u001b[0m";
    indent = "\u001b[" + (30 + (depth % 5)) + "mÂ· \u001b[0m";
    return console.log(Array(depth + 1).join(indent) + prefix, message);
  };

  isBroken = function(ast) {
    var output;
    output = require('util').inspect(ast, {
      depth: 1000
    });
    if (~output.indexOf("[Circular]")) {
      return "[Circular]";
    }
  };

}).call(this);

//# sourceMappingURL=debug.js.map
